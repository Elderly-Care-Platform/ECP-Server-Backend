define(["byApp"], function(byApp) {
    'use strict';

    function ShareController($scope, $http, $rootScope, $location, $sce, $filter, ValidateUserCredential, ShareDiscuss) {

        $scope.pathName = location.pathname;
        
        $scope.shares = {}
        
        $scope.checkSession = localStorage.getItem("SessionId");
        
        $scope.emailShare = function emailShare(data) {
        	
        	var senderName = null;
        	if(localStorage.getItem("SessionId")==""){
        		senderName = $scope.shares.guestName;
        	}else{
        		senderName = localStorage.getItem("USER_NAME");
        	}
        	
        	var profileImage = null;
        	if(data.userProfile == null){
        		profileImage = 'http://beautifulyears.com/assets/img/by.png';
        	}else{
        		if(data.userProfile.basicProfileInfo.profileImage.original == undefined){
        			profileImage = 'http://beautifulyears.com/' + data.userProfile.basicProfileInfo.profileImage.thumbnailImage;
        		}else{
        			profileImage = 'http://beautifulyears.com' + data.userProfile.basicProfileInfo.profileImage.original;
        		}
        		
        	}
        	
        	var storyTitle = null;
        	if(data.linkInfo == null){
        		storyTitle = data.title;
        	}else{
        		storyTitle = data.linkInfo.title;
        	}
        	
        	var testHTML = data.text;
        	var found = $(testHTML).filter("iframe");
        	console.log(found)
        	
        	var storyImage = null;
        	if(data.linkInfo == null){
        		if(data.articlePhotoFilename != null){
        			storyImage = 'http://beautifulyears.com' + data.articlePhotoFilename.titleImage;
        		}else{
        			storyImage = '';
        		}
        	}else{
        		storyImage = 'http://beautifulyears.com' + data.linkInfo.mainImage;
        	}
        	
        	var borderOpen = null;
        	var borderClose = null;
        	if(storyImage != ''){
        		borderOpen = '<img style="border: 0;display: block;max-width: 100%; height:auto; border:5px solid #F1F1F1" src="';
        		borderClose = '" alt="" width="470"/>';
        	}else{
        		borderOpen = '';
        		borderClose = '';
        	}
        	
        	data.createdAt = $filter('date')(data.createdAt, "dd/MM/yyyy");
        	var dateToday = $filter('date')(new Date(), "dd/MM/yyyy"),
            	dt1 = data.createdAt.split('/'),
                dt2 = dateToday.split('/'),
                one = new Date(dt1[2], dt1[1]-1, dt1[0]),
                two = new Date(dt2[2], dt2[1]-1, dt2[0]);
            var millisecondsPerDay = 1000 * 60 * 60 * 24;
            var millisBetween = two.getTime() - one.getTime();
            var days = millisBetween / millisecondsPerDay;
            var dateDifference = Math.floor(days);
            
            $scope.htmlBody = '';
            
            if(data.linkInfo != null){
            	$scope.htmlBody = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional //EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html> <head> <title></title> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <style type="text/css">body {margin: 0;mso-line-height-rule: exactly; padding: 0; min-width: 100%;}table { border-collapse: collapse; border-spacing: 0;}td { padding: 0; vertical-align: top;}.spacer, .border { font-size: 1px; line-height: 1px;}.spacer { width: 100%;}img { border: 0; -ms-interpolation-mode: bicubic;}.image { font-size: 12px; Margin-bottom: 24px; mso-line-height-rule: at-least;}.image img { display: block;}.logo { mso-line-height-rule: at-least;}.logo img { display: block;}strong { font-weight: bold;}h1, h2, h3, p, ol, ul, li { Margin-top: 0;}ol,ul,li { padding-left: 0;}blockquote { Margin-top: 0; Margin-right: 0; Margin-bottom: 0; padding-right: 0;}.column-top { font-size: 50px; line-height: 50px;}.column-bottom { font-size: 26px; line-height: 26px;}.column { text-align: left;}.contents { table-layout: fixed; width: 100%;}.padded { padding-left: 50px; padding-right: 50px; word-break: break-word; word-wrap: break-word;}.wrapper { display: table; table-layout: fixed; width: 100%; min-width: 620px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;}table.wrapper { table-layout: fixed;}.one-col, .two-col, .three-col { Margin-left: auto; Margin-right: auto; width: 600px;}.centered { Margin-left: auto; Margin-right: auto;}.two-col .image { Margin-bottom: 21px;}.two-col .column-bottom { font-size: 29px; line-height: 29px;}.two-col .column { width: 300px;}.two-col .first .padded { padding-left: 50px; padding-right: 25px;}.two-col .second .padded { padding-left: 25px; padding-right: 50px;}.three-col .image { Margin-bottom: 18px;}.three-col .column-bottom { font-size: 32px; line-height: 32px;}.three-col .column { width: 200px;}.three-col .first .padded { padding-left: 50px; padding-right: 10px;}.three-col .second .padded { padding-left: 30px; padding-right: 30px;}.three-col .third .padded { padding-left: 10px; padding-right: 50px;}.wider { width: 400px;}.narrower { width: 200px;}@media only screen and (min-width: 0) { .wrapper {text-rendering: optimizeLegibility; }}@media only screen and (max-width: 620px) { [class=wrapper] {min-width: 320px !important;width: 100% !important; } [class=wrapper] .one-col, [class=wrapper] .two-col, [class=wrapper] .three-col {width: 320px !important; } [class=wrapper] .column, [class=wrapper] .gutter {display: block;float: left;width: 320px !important; } [class=wrapper] .padded {padding-left: 20px !important;padding-right: 20px !important; } [class=wrapper] .block {display: block !important; } [class=wrapper] .hide {display: none !important; } [class=wrapper] .image {margin-bottom: 24px !important; } [class=wrapper] .image img {height: auto !important;width: 100% !important; }}.wrapper h1 { font-weight: 400;}.wrapper h2 { font-weight: 700;}.wrapper h3 { font-weight: 400;}.wrapper blockquote p,.wrapper blockquote ol,.wrapper blockquote ul { font-style: italic;}td.border { width: 1px;}tr.border { background-color: #e3e3e3; height: 1px;}tr.border td { line-height: 1px;}.sidebar { width: 600px;}.first.wider .padded { padding-left: 50px; padding-right: 30px;}.second.wider .padded { padding-left: 30px; padding-right: 50px;}.first.narrower .padded { padding-left: 50px; padding-right: 10px;}.second.narrower .padded { padding-left: 10px; padding-right: 50px;}.divider { Margin-bottom: 24px;}.wrapper h1 { font-size: 40px; Margin-bottom: 20px;}.wrapper h2 { font-size: 24px; Margin-bottom: 16px;}.wrapper h3 { font-size: 18px; Margin-bottom: 12px;}.wrapper a { text-decoration: none;}.wrapper a:hover { border-bottom: 0; text-decoration: none;}.wrapper h1 a,.wrapper h2 a,.wrapper h3 a { border: none;}.wrapper p,.wrapper ol,.wrapper ul { font-size: 15px;}.wrapper ol,.wrapper ul { Margin-left: 20px;}.wrapper li { padding-left: 2px;}.wrapper blockquote { Margin: 0; padding-left: 18px;}.btn { Margin-bottom: 27px;}.btn a { border: 0; border-radius: 4px; display: inline-block; font-size: 14px; font-weight: 700; line-height: 21px; padding: 9px 22px 8px 22px; text-align: center; text-decoration: none;}.btn a:hover { Position: relative; top: 3px;}.one-col,.two-col,.three-col,.sidebar { background-color: #ffffff; table-layout: fixed;}.one-col .column table:nth-last-child(2) td h1:last-child,.one-col .column table:nth-last-child(2) td h2:last-child,.one-col .column table:nth-last-child(2) td h3:last-child,.one-col .column table:nth-last-child(2) td p:last-child,.one-col .column table:nth-last-child(2) td ol:last-child,.one-col .column table:nth-last-child(2) td ul:last-child { Margin-bottom: 24px;}.wrapper .two-col .column table:nth-last-child(2) td h1:last-child,.wrapper .wider .column table:nth-last-child(2) td h1:last-child,.wrapper .two-col .column table:nth-last-child(2) td h2:last-child,.wrapper .wider .column table:nth-last-child(2) td h2:last-child,.wrapper .two-col .column table:nth-last-child(2) td h3:last-child,.wrapper .wider .column table:nth-last-child(2) td h3:last-child,.wrapper .two-col .column table:nth-last-child(2) td p:last-child,.wrapper .wider .column table:nth-last-child(2) td p:last-child,.wrapper .two-col .column table:nth-last-child(2) td ol:last-child,.wrapper .wider .column table:nth-last-child(2) td ol:last-child,.wrapper .two-col .column table:nth-last-child(2) td ul:last-child,.wrapper .wider .column table:nth-last-child(2) td ul:last-child { Margin-bottom: 21px;}.wrapper .two-col h1,.wrapper .wider h1 { font-size: 28px; Margin-bottom: 18px;}.wrapper .two-col h2,.wrapper .wider h2 { font-size: 20px; Margin-bottom: 14px;}.wrapper .two-col h3,.wrapper .wider h3 { font-size: 17px; Margin-bottom: 10px;}.wrapper .two-col p,.wrapper .wider p,.wrapper .two-col ol,.wrapper .wider ol,.wrapper .two-col ul,.wrapper .wider ul { font-size: 13px;}.wrapper .two-col blockquote,.wrapper .wider blockquote { padding-left: 16px;}.wrapper .two-col .divider,.wrapper .wider .divider { Margin-bottom: 21px;}.wrapper .two-col .btn,.wrapper .wider .btn { Margin-bottom: 24px;}.wrapper .two-col .btn a,.wrapper .wider .btn a { font-size: 12px; line-height: 19px; padding: 6px 17px 6px 17px;}.wrapper .three-col .column table:nth-last-child(2) td h1:last-child,.wrapper .narrower .column table:nth-last-child(2) td h1:last-child,.wrapper .three-col .column table:nth-last-child(2) td h2:last-child,.wrapper .narrower .column table:nth-last-child(2) td h2:last-child,.wrapper .three-col .column table:nth-last-child(2) td h3:last-child,.wrapper .narrower .column table:nth-last-child(2) td h3:last-child,.wrapper .three-col .column table:nth-last-child(2) td p:last-child,.wrapper .narrower .column table:nth-last-child(2) td p:last-child,.wrapper .three-col .column table:nth-last-child(2) td ol:last-child,.wrapper .narrower .column table:nth-last-child(2) td ol:last-child,.wrapper .three-col .column table:nth-last-child(2) td ul:last-child,.wrapper .narrower .column table:nth-last-child(2) td ul:last-child { Margin-bottom: 18px;}.wrapper .three-col h1,.wrapper .narrower h1 { font-size: 24px; Margin-bottom: 16px;}.wrapper .three-col h2,.wrapper .narrower h2 { font-size: 18px; Margin-bottom: 12px;}.wrapper .three-col h3,.wrapper .narrower h3 { font-size: 15px; Margin-bottom: 8px;}.wrapper .three-col p,.wrapper .narrower p,.wrapper .three-col ol,.wrapper .narrower ol,.wrapper .three-col ul,.wrapper .narrower ul { font-size: 12px;}.wrapper .three-col ol,.wrapper .narrower ol,.wrapper .three-col ul,.wrapper .narrower ul { Margin-left: 14px;}.wrapper .three-col li,.wrapper .narrower li { padding-left: 1px;}.wrapper .three-col blockquote,.wrapper .narrower blockquote { padding-left: 12px;}.wrapper .three-col .divider,.wrapper .narrower .divider { Margin-bottom: 18px;}.wrapper .three-col .btn,.wrapper .narrower .btn { Margin-bottom: 21px;}.wrapper .three-col .btn a,.wrapper .narrower .btn a { font-size: 10px; line-height: 16px; padding: 5px 17px 5px 17px;}.wrapper .wider .column-bottom { font-size: 29px; line-height: 29px;}.wrapper .wider .image { Margin-bottom: 21px;}.wrapper .narrower .column-bottom { font-size: 32px; line-height: 32px;}.wrapper .narrower .image { Margin-bottom: 18px;}.header { Margin-left: auto; Margin-right: auto; width: 600px;}.header .logo { padding-bottom: 40px; padding-top: 40px; width: 280px;}.header .logo div { font-size: 24px; font-weight: 700; line-height: 30px;}.header .logo div a { text-decoration: none;}.header .logo div.logo-center { text-align: center;}.header .logo div.logo-center img { Margin-left: auto; Margin-right: auto;}.header .preheader { padding-bottom: 40px; padding-top: 40px; text-align: right; width: 280px;}.preheader,.footer { letter-spacing: 0.01em; font-style: normal; line-height: 17px; font-weight: 400;}.preheader a,.footer a { letter-spacing: 0.03em; font-style: normal; font-weight: 700;}.preheader,.footer,.footer .social a { font-size: 11px;}.footer { Margin-right: auto; Margin-left: auto; padding-top: 50px; padding-bottom: 40px; width: 602px;}.footer table { Margin-left: auto; Margin-right: auto;}.footer .social { text-transform: uppercase;}.footer .social span { mso-text-raise: 4px;}.footer .social td { padding-bottom: 30px; padding-left: 20px; padding-right: 20px;}.footer .social a { display: block; transition: opacity 0.2s;}.footer .social a:hover { opacity: 0.75;}.footer .address { Margin-bottom: 19px;}.footer .permission { Margin-bottom: 10px;}@media only screen and (max-width: 620px) { [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td h1:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td h1:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td h1:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td h2:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td h2:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td h2:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td h3:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td h3:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td h3:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td p:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td p:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td p:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td ol:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td ol:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td ol:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td ul:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td ul:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td ul:last-child {Margin-bottom: 24px !important; } [class=wrapper] .header, [class=wrapper] .preheader, [class=wrapper] .logo, [class=wrapper] .footer, [class=wrapper] .sidebar {width: 320px !important; } [class=wrapper] .header .logo {padding-bottom: 32px !important;padding-top: 12px !important;padding-left: 10px !important;padding-right: 10px !important; } [class=wrapper] .header .logo img {max-width: 280px !important;height: auto !important; } [class=wrapper] .header .preheader {padding-top: 3px !important;padding-bottom: 22px !important; } [class=wrapper] .header .title {display: none !important; } [class=wrapper] .header .webversion {text-align: center !important; } [class=wrapper] .footer .address, [class=wrapper] .footer .permission {width: 280px !important; } [class=wrapper] h1 {font-size: 40px !important;Margin-bottom: 20px !important; } [class=wrapper] h2 {font-size: 24px !important;Margin-bottom: 16px !important; } [class=wrapper] h3 {font-size: 18px !important;Margin-bottom: 12px !important; } [class=wrapper] .column p, [class=wrapper] .column ol, [class=wrapper] .column ul {font-size: 15px !important; } [class=wrapper] ol, [class=wrapper] ul {Margin-left: 20px !important; } [class=wrapper] li {padding-left: 2px !important; } [class=wrapper] blockquote {border-left-width: 4px !important;padding-left: 18px !important; } [class=wrapper] .btn, [class=wrapper] .two-col .btn, [class=wrapper] .three-col .btn, [class=wrapper] .narrower .btn, [class=wrapper] .wider .btn {Margin-bottom: 27px !important; } [class=wrapper] .btn a, [class=wrapper] .two-col .btn a, [class=wrapper] .three-col .btn a, [class=wrapper] .narrower .btn a, [class=wrapper] .wider .btn a {display: block !important;font-size: 14px !important;letter-spacing: 0.04em !important;line-height: 21px !important;padding: 9px 22px 8px 22px !important; } [class=wrapper] table.border {width: 320px !important; } [class=wrapper] .divider {margin-bottom: 24px !important; } [class=wrapper] .column-bottom {font-size: 26px !important;line-height: 26px !important; } [class=wrapper] .first .column-bottom, [class=wrapper] .second .column-top, [class=wrapper] .three-col .second .column-bottom, [class=wrapper] .third .column-top {display: none; } [class=wrapper] .social td {display: block !important;text-align: center !important; }}@media only screen and (max-width: 320px) { td[class=border] {display: none; }}@media (-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi) { .one-col ul {border-left: 30px solid #ffffff; }}</style> <!--[if gte mso 9]> <style> .column-top { mso-line-height-rule: exactly !important; } </style> <![endif]--> <meta name="robots" content="noindex,nofollow" /><meta property="og:title" content="My First Campaign" /><link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css"></head> <body style="margin: 0;mso-line-height-rule: exactly;padding: 0;min-width: 100%;background-color: #222"> <style type="text/css">@import url(https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic);@import url(https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic);@import url(https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic);@import url(https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic);@import url(https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic);@import url(http://fonts.googleapis.com/css?family=Kaushan+Script);@font-face{font-family:"Kaushan Script";font-style:normal;font-weight:400;src:local("Kaushan Script"),local("Kaushan Script"),url("http://fonts.googleapis.com/css?family=Kaushan+Script");}body,.wrapper,.emb-editor-canvas{background-color:#ecf3f5}.border{background-color:#F0F0F0 !important}h1{color:#557187}.wrapper h1{}.wrapper h1{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.wrapper h1{font-family:Roboto,Tahoma,helvetica !important}}h1{}.one-col h1{line-height:50px}.two-col h1,.wider h1{line-height:36px}.three-col h1,.narrower h1{line-height:32px}@media only screen and (max-width: 620px){h1{line-height:50px !important}}h2{color:#557187}.wrapper h2{}.wrapper h2{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.wrapper h2{font-family:Roboto,Tahoma,helvetica !important}}h2{}.one-col h2{line-height:32px}.two-col h2,.wider h2{line-height:26px}.three-col h2,.narrower h2{line-height:24px}@media only screen and (max-width: 620px){h2{line-height:32px !important}}h3{color:#557187}.wrapper h3{}.wrapper h3{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.wrapper h3{font-family:Roboto,Tahoma,helvetica !important}}h3{}.one-col h3{line-height:26px}.two-col h3,.wider h3{line-height:23px}.three-col h3,.narrower h3{line-height:21px}@media only screen and (max-width: 620px){h3{line-height:26px !important}}p,ol,ul{color:#757575}.wrapper p,.wrapper ol,.wrapper ul{}.wrapper p,.wrapper ol,.wrapper ul{font-family:helvetica}p,ol,ul{}.one-col p,.one-col ol,.one-col ul{line-height:24px;Margin-bottom:24px}.two-col p,.two-col ol,.two-col ul,.wider p,.wider ol,.wider ul{line-height:21px;Margin-bottom:21px}.three-col p,.three-col ol,.three-col ul,.narrower p,.narrower ol,.narrower ul{line-height:18px;Margin-bottom:18px}@media only screen and (max-width: 620px){p,ol,ul{line-height:24px !important;Margin-bottom:24px !important}}.image{color:#757575}.image{font-family:helvetica}.wrapper a{color:#454545}.wrapper a:hover{color:#2b2b2b !important}.wrapper .btn a{color:#fff;background-color:#557187;box-shadow:0 3px 0 #445a6c}.wrapper .btn a{font-family:helvetica}.wrapper .btn a:hover{box-shadow:inset 0 1px 2px #445a6c !important;color:#fff !important}.wrapper p a,.wrapper ol a,.wrapper ul a{border-bottom:1px dotted #454545}.wrapper blockquote{border-left:4px solid #ecf3f5}.wrapper .three-col blockquote,.wrapper .narrower blockquote{border-left:2px solid #ecf3f5}.logo div{color:#c3ced9}.wrapper .logo div{}.wrapper .logo div{font-family:"Trebuchet MS",helvetica}@media only screen and (min-width: 0){.wrapper .logo div{font-family: "Kaushan Script" !important}}.logo div a{color:#FED136}.logo div a:hover{color:#FED136 !important}.preheader,.footer{color:#b9b9b9}.preheader,.footer{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.preheader,.footer{font-family:Roboto,Tahoma,helvetica !important}}.wrapper .preheader a,.wrapper .footer a{color:#b9b9b9}.wrapper .preheader a:hover,.wrapper .footer a:hover{color:#b9b9b9 !important}.footer .social a{}.wrapper .footer .social a{}.wrapper .footer .social a{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.wrapper .footer .social a{font-family:Roboto,Tahoma,helvetica !important}}.footer .social a{}.footer .social a{font-weight:600}</style> <center class="wrapper" style="display: table;table-layout: fixed;width: 100%;min-width: 480px;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;background: #fff;"> <!--table starts--> <table class="border" style="border-collapse: collapse;border-spacing: 0;font-size: 1px;line-height: 1px;background-color: #d4dbdd;Margin-left: auto;Margin-right: auto"> <tbody> <tr> <td style="padding: 0;vertical-align: top">&#8203; </td> </tr> </tbody> </table><!--table ends--> <table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;padding-top: 50px;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top;padding-bottom:30px; padding-left: 20px;padding-right: 20px"><a style="outline:none;" href="http://beautifulyears.com" target="_blank" > <img style="width:180px;Margin-top:-20px;"src="http://beautifulyears.com/uploaded_files/c5a6c771-a28e-417e-91ae-557112aaa36a.png" /> </a> </td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--><!--table starts--> <table class="border" style="border-collapse: collapse;border-spacing: 0;font-size: 1px;line-height: 1px;background-color: #d4dbdd;Margin-left: auto;Margin-right: auto" width="480"> <tbody> <tr class="border" style="font-size: 1px;line-height: 1px;background-color: #e3e3e3;height: 1px"> <td class="border" style="padding: 0;vertical-align: top;font-size: 1px;line-height: 1px;background-color: #d4dbdd;width: 1px">&#8203; </td> <td style="padding: 0;vertical-align: top;line-height: 1px">&#8203;</td> <td class="border" style="padding: 0;vertical-align: top;font-size: 1px;line-height: 1px;background-color: #d4dbdd;width: 1px">&#8203;</td> </tr> </tbody> </table><!--table ends--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;padding-top: 20px;width: 480px; color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top;padding-bottom:20px;"><h3 style ="font-size:18px; font-weight: 300; text-align:left; line-height:20px; color:#818181;"><b style="color:#222">'
            		+ senderName
            		+ '</b> shared a BeautifulYears post with you.</h3><div style="width:100%; position: relative !important; height:44px;"><div style="width: 25%;height: 0;padding-left:3%;padding-bottom:3%; top: -22%;overflow: hidden; position:absolute"><div style="width: 0;height: 0;margin-left:0px;border-left: 10px solid transparent;border-right: 10px solid transparent;border-bottom: 10px solid #BCBCBC;"></div></div><div style="width: 25%;height: 0;padding-left:3%;padding-bottom:3%; top: -20%; overflow: hidden; position:absolute"><div style="width: 2px;height: 2px;margin-left:-1px;border-left: 10px solid transparent;border-right: 10px solid transparent;border-bottom: 10px solid #f5f5f5;"></div></div><div style="background: #f5f5f5 none repeat scroll 0% 0%; width:480px; height:auto; min-height:30px; height:auto !important; height:30px; overflow: hidden; border-radius: 5px; border: 1px solid rgb(188, 188, 188);"><p style="margin-top: 0px; color: #818181; font-weight: 300; font-size: 16px; font-family: helvetica; line-height: 22px; margin-bottom: 0px; text-align: justify; padding:10px;">'
            		+ $scope.shares.message 
            		+ '</p></div></div></td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;padding-top: 0px;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top; padding-left: 20px;padding-right: 20px"><img style="width:50px; display: inline;border:5px solid #F1F1F1" src="'
            		+ profileImage
            		+ '" /> <div style="display: inline; float: right; margin: 0px 15px"><p style="color: rgb(65, 65, 65); font-size: 15px; font-family: helvetica; margin-top: 6px; line-height: 15px; margin-bottom: 6px; font-weight: 500;">By '
            		+ data.username
            		+ '</p><p style="margin-top: 0px; color: rgb(128, 124, 124); font-weight: 300; font-size: 15px; font-family: helvetica; line-height: 21px; text-align: justify;">'
            		+ dateDifference
            		+ ' days ago</p></div></td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--><!--table starts--> <table class="border" style="border-collapse: collapse;border-spacing: 0;font-size: 1px;line-height: 1px;background-color: #d4dbdd;Margin-left: auto;Margin-right: auto"> <tbody> <tr> <td style="padding: 0;vertical-align: top">&#8203; </td> </tr> </tbody> </table><!--table ends--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align:top;"><h3 style="Margin-top: 0;color: #333; font-weight: 300;font-size: 20px; Margin-bottom:10px; font-family: helvetica; line-height: 22px; text-align:center">'
            		+ data.linkInfo.title
            		+ '</h3> </td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top;padding-left: 20px;padding-right: 20px"><div class="image" style="font-size: 12px;Margin-bottom: 21px;mso-line-height-rule: at-least;color: #757575;font-family: helvetica" align="center">'
            		+ borderOpen
            		+ storyImage
            		+ borderClose
            		+ '</div> </td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--> <!--table starts--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top;padding-bottom: 20px;"> <p style="Margin-top: 0;color: #777;font-size: 16px;font-family: helvetica; line-height: 22px;Margin-bottom: 21px; width:100%; height:auto; min-height:30px; height:auto !important; height:30px; overflow:hidden; text-align:center">'
            		+ data.linkInfo.description 
            		+ '</p><a href="http://beautifulyears.com/#!/discuss/'
            		+ data.id
            		+ '" target="_blank" style="text-align:center; display:block"><h3 style="background: #004f24 none repeat scroll 20px 20px; width: 155px; height: 35px; line-height: 35px; border-radius: 3px; color: rgb(255, 255, 255); font-size: 15px; margin: 20px 35%;">Read Full Article</h3></a></td> </tr> </tbody> </table> </center> </td> </tr> </tbody></table><!--table ends--> </center> <script type="text/javascript"> WebFontConfig = { google: { families: [ "Kaushan+Script::latin" ] } }; (function() { var wf = document.createElement("script"); wf.src = ("https:" == document.location.protocol ? "https" : "http") + "://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"; wf.type = "text/javascript"; wf.async = "true"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(wf, s); })(); </script></body></html>';
            	
            }else{
            	$scope.htmlBody = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional //EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html> <head> <title></title> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <style type="text/css">body {margin: 0;mso-line-height-rule: exactly; padding: 0; min-width: 100%;}table { border-collapse: collapse; border-spacing: 0;}td { padding: 0; vertical-align: top;}.spacer, .border { font-size: 1px; line-height: 1px;}.spacer { width: 100%;}img { border: 0; -ms-interpolation-mode: bicubic;}.image { font-size: 12px; Margin-bottom: 24px; mso-line-height-rule: at-least;}.image img { display: block;}.logo { mso-line-height-rule: at-least;}.logo img { display: block;}strong { font-weight: bold;}h1, h2, h3, p, ol, ul, li { Margin-top: 0;}ol,ul,li { padding-left: 0;}blockquote { Margin-top: 0; Margin-right: 0; Margin-bottom: 0; padding-right: 0;}.column-top { font-size: 50px; line-height: 50px;}.column-bottom { font-size: 26px; line-height: 26px;}.column { text-align: left;}.contents { table-layout: fixed; width: 100%;}.padded { padding-left: 50px; padding-right: 50px; word-break: break-word; word-wrap: break-word;}.wrapper { display: table; table-layout: fixed; width: 100%; min-width: 620px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;}table.wrapper { table-layout: fixed;}.one-col, .two-col, .three-col { Margin-left: auto; Margin-right: auto; width: 600px;}.centered { Margin-left: auto; Margin-right: auto;}.two-col .image { Margin-bottom: 21px;}.two-col .column-bottom { font-size: 29px; line-height: 29px;}.two-col .column { width: 300px;}.two-col .first .padded { padding-left: 50px; padding-right: 25px;}.two-col .second .padded { padding-left: 25px; padding-right: 50px;}.three-col .image { Margin-bottom: 18px;}.three-col .column-bottom { font-size: 32px; line-height: 32px;}.three-col .column { width: 200px;}.three-col .first .padded { padding-left: 50px; padding-right: 10px;}.three-col .second .padded { padding-left: 30px; padding-right: 30px;}.three-col .third .padded { padding-left: 10px; padding-right: 50px;}.wider { width: 400px;}.narrower { width: 200px;}@media only screen and (min-width: 0) { .wrapper {text-rendering: optimizeLegibility; }}@media only screen and (max-width: 620px) { [class=wrapper] {min-width: 320px !important;width: 100% !important; } [class=wrapper] .one-col, [class=wrapper] .two-col, [class=wrapper] .three-col {width: 320px !important; } [class=wrapper] .column, [class=wrapper] .gutter {display: block;float: left;width: 320px !important; } [class=wrapper] .padded {padding-left: 20px !important;padding-right: 20px !important; } [class=wrapper] .block {display: block !important; } [class=wrapper] .hide {display: none !important; } [class=wrapper] .image {margin-bottom: 24px !important; } [class=wrapper] .image img {height: auto !important;width: 100% !important; }}.wrapper h1 { font-weight: 400;}.wrapper h2 { font-weight: 700;}.wrapper h3 { font-weight: 400;}.wrapper blockquote p,.wrapper blockquote ol,.wrapper blockquote ul { font-style: italic;}td.border { width: 1px;}tr.border { background-color: #e3e3e3; height: 1px;}tr.border td { line-height: 1px;}.sidebar { width: 600px;}.first.wider .padded { padding-left: 50px; padding-right: 30px;}.second.wider .padded { padding-left: 30px; padding-right: 50px;}.first.narrower .padded { padding-left: 50px; padding-right: 10px;}.second.narrower .padded { padding-left: 10px; padding-right: 50px;}.divider { Margin-bottom: 24px;}.wrapper h1 { font-size: 40px; Margin-bottom: 20px;}.wrapper h2 { font-size: 24px; Margin-bottom: 16px;}.wrapper h3 { font-size: 18px; Margin-bottom: 12px;}.wrapper a { text-decoration: none;}.wrapper a:hover { border-bottom: 0; text-decoration: none;}.wrapper h1 a,.wrapper h2 a,.wrapper h3 a { border: none;}.wrapper p,.wrapper ol,.wrapper ul { font-size: 15px;}.wrapper ol,.wrapper ul { Margin-left: 20px;}.wrapper li { padding-left: 2px;}.wrapper blockquote { Margin: 0; padding-left: 18px;}.btn { Margin-bottom: 27px;}.btn a { border: 0; border-radius: 4px; display: inline-block; font-size: 14px; font-weight: 700; line-height: 21px; padding: 9px 22px 8px 22px; text-align: center; text-decoration: none;}.btn a:hover { Position: relative; top: 3px;}.one-col,.two-col,.three-col,.sidebar { background-color: #ffffff; table-layout: fixed;}.one-col .column table:nth-last-child(2) td h1:last-child,.one-col .column table:nth-last-child(2) td h2:last-child,.one-col .column table:nth-last-child(2) td h3:last-child,.one-col .column table:nth-last-child(2) td p:last-child,.one-col .column table:nth-last-child(2) td ol:last-child,.one-col .column table:nth-last-child(2) td ul:last-child { Margin-bottom: 24px;}.wrapper .two-col .column table:nth-last-child(2) td h1:last-child,.wrapper .wider .column table:nth-last-child(2) td h1:last-child,.wrapper .two-col .column table:nth-last-child(2) td h2:last-child,.wrapper .wider .column table:nth-last-child(2) td h2:last-child,.wrapper .two-col .column table:nth-last-child(2) td h3:last-child,.wrapper .wider .column table:nth-last-child(2) td h3:last-child,.wrapper .two-col .column table:nth-last-child(2) td p:last-child,.wrapper .wider .column table:nth-last-child(2) td p:last-child,.wrapper .two-col .column table:nth-last-child(2) td ol:last-child,.wrapper .wider .column table:nth-last-child(2) td ol:last-child,.wrapper .two-col .column table:nth-last-child(2) td ul:last-child,.wrapper .wider .column table:nth-last-child(2) td ul:last-child { Margin-bottom: 21px;}.wrapper .two-col h1,.wrapper .wider h1 { font-size: 28px; Margin-bottom: 18px;}.wrapper .two-col h2,.wrapper .wider h2 { font-size: 20px; Margin-bottom: 14px;}.wrapper .two-col h3,.wrapper .wider h3 { font-size: 17px; Margin-bottom: 10px;}.wrapper .two-col p,.wrapper .wider p,.wrapper .two-col ol,.wrapper .wider ol,.wrapper .two-col ul,.wrapper .wider ul { font-size: 13px;}.wrapper .two-col blockquote,.wrapper .wider blockquote { padding-left: 16px;}.wrapper .two-col .divider,.wrapper .wider .divider { Margin-bottom: 21px;}.wrapper .two-col .btn,.wrapper .wider .btn { Margin-bottom: 24px;}.wrapper .two-col .btn a,.wrapper .wider .btn a { font-size: 12px; line-height: 19px; padding: 6px 17px 6px 17px;}.wrapper .three-col .column table:nth-last-child(2) td h1:last-child,.wrapper .narrower .column table:nth-last-child(2) td h1:last-child,.wrapper .three-col .column table:nth-last-child(2) td h2:last-child,.wrapper .narrower .column table:nth-last-child(2) td h2:last-child,.wrapper .three-col .column table:nth-last-child(2) td h3:last-child,.wrapper .narrower .column table:nth-last-child(2) td h3:last-child,.wrapper .three-col .column table:nth-last-child(2) td p:last-child,.wrapper .narrower .column table:nth-last-child(2) td p:last-child,.wrapper .three-col .column table:nth-last-child(2) td ol:last-child,.wrapper .narrower .column table:nth-last-child(2) td ol:last-child,.wrapper .three-col .column table:nth-last-child(2) td ul:last-child,.wrapper .narrower .column table:nth-last-child(2) td ul:last-child { Margin-bottom: 18px;}.wrapper .three-col h1,.wrapper .narrower h1 { font-size: 24px; Margin-bottom: 16px;}.wrapper .three-col h2,.wrapper .narrower h2 { font-size: 18px; Margin-bottom: 12px;}.wrapper .three-col h3,.wrapper .narrower h3 { font-size: 15px; Margin-bottom: 8px;}.wrapper .three-col p,.wrapper .narrower p,.wrapper .three-col ol,.wrapper .narrower ol,.wrapper .three-col ul,.wrapper .narrower ul { font-size: 12px;}.wrapper .three-col ol,.wrapper .narrower ol,.wrapper .three-col ul,.wrapper .narrower ul { Margin-left: 14px;}.wrapper .three-col li,.wrapper .narrower li { padding-left: 1px;}.wrapper .three-col blockquote,.wrapper .narrower blockquote { padding-left: 12px;}.wrapper .three-col .divider,.wrapper .narrower .divider { Margin-bottom: 18px;}.wrapper .three-col .btn,.wrapper .narrower .btn { Margin-bottom: 21px;}.wrapper .three-col .btn a,.wrapper .narrower .btn a { font-size: 10px; line-height: 16px; padding: 5px 17px 5px 17px;}.wrapper .wider .column-bottom { font-size: 29px; line-height: 29px;}.wrapper .wider .image { Margin-bottom: 21px;}.wrapper .narrower .column-bottom { font-size: 32px; line-height: 32px;}.wrapper .narrower .image { Margin-bottom: 18px;}.header { Margin-left: auto; Margin-right: auto; width: 600px;}.header .logo { padding-bottom: 40px; padding-top: 40px; width: 280px;}.header .logo div { font-size: 24px; font-weight: 700; line-height: 30px;}.header .logo div a { text-decoration: none;}.header .logo div.logo-center { text-align: center;}.header .logo div.logo-center img { Margin-left: auto; Margin-right: auto;}.header .preheader { padding-bottom: 40px; padding-top: 40px; text-align: right; width: 280px;}.preheader,.footer { letter-spacing: 0.01em; font-style: normal; line-height: 17px; font-weight: 400;}.preheader a,.footer a { letter-spacing: 0.03em; font-style: normal; font-weight: 700;}.preheader,.footer,.footer .social a { font-size: 11px;}.footer { Margin-right: auto; Margin-left: auto; padding-top: 50px; padding-bottom: 40px; width: 602px;}.footer table { Margin-left: auto; Margin-right: auto;}.footer .social { text-transform: uppercase;}.footer .social span { mso-text-raise: 4px;}.footer .social td { padding-bottom: 30px; padding-left: 20px; padding-right: 20px;}.footer .social a { display: block; transition: opacity 0.2s;}.footer .social a:hover { opacity: 0.75;}.footer .address { Margin-bottom: 19px;}.footer .permission { Margin-bottom: 10px;}@media only screen and (max-width: 620px) { [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td h1:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td h1:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td h1:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td h2:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td h2:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td h2:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td h3:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td h3:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td h3:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td p:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td p:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td p:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td ol:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td ol:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td ol:last-child, [class=wrapper] .one-col .column:last-child table:nth-last-child(2) td ul:last-child, [class=wrapper] .two-col .column:last-child table:nth-last-child(2) td ul:last-child, [class=wrapper] .three-col .column:last-child table:nth-last-child(2) td ul:last-child {Margin-bottom: 24px !important; } [class=wrapper] .header, [class=wrapper] .preheader, [class=wrapper] .logo, [class=wrapper] .footer, [class=wrapper] .sidebar {width: 320px !important; } [class=wrapper] .header .logo {padding-bottom: 32px !important;padding-top: 12px !important;padding-left: 10px !important;padding-right: 10px !important; } [class=wrapper] .header .logo img {max-width: 280px !important;height: auto !important; } [class=wrapper] .header .preheader {padding-top: 3px !important;padding-bottom: 22px !important; } [class=wrapper] .header .title {display: none !important; } [class=wrapper] .header .webversion {text-align: center !important; } [class=wrapper] .footer .address, [class=wrapper] .footer .permission {width: 280px !important; } [class=wrapper] h1 {font-size: 40px !important;Margin-bottom: 20px !important; } [class=wrapper] h2 {font-size: 24px !important;Margin-bottom: 16px !important; } [class=wrapper] h3 {font-size: 18px !important;Margin-bottom: 12px !important; } [class=wrapper] .column p, [class=wrapper] .column ol, [class=wrapper] .column ul {font-size: 15px !important; } [class=wrapper] ol, [class=wrapper] ul {Margin-left: 20px !important; } [class=wrapper] li {padding-left: 2px !important; } [class=wrapper] blockquote {border-left-width: 4px !important;padding-left: 18px !important; } [class=wrapper] .btn, [class=wrapper] .two-col .btn, [class=wrapper] .three-col .btn, [class=wrapper] .narrower .btn, [class=wrapper] .wider .btn {Margin-bottom: 27px !important; } [class=wrapper] .btn a, [class=wrapper] .two-col .btn a, [class=wrapper] .three-col .btn a, [class=wrapper] .narrower .btn a, [class=wrapper] .wider .btn a {display: block !important;font-size: 14px !important;letter-spacing: 0.04em !important;line-height: 21px !important;padding: 9px 22px 8px 22px !important; } [class=wrapper] table.border {width: 320px !important; } [class=wrapper] .divider {margin-bottom: 24px !important; } [class=wrapper] .column-bottom {font-size: 26px !important;line-height: 26px !important; } [class=wrapper] .first .column-bottom, [class=wrapper] .second .column-top, [class=wrapper] .three-col .second .column-bottom, [class=wrapper] .third .column-top {display: none; } [class=wrapper] .social td {display: block !important;text-align: center !important; }}@media only screen and (max-width: 320px) { td[class=border] {display: none; }}@media (-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi) { .one-col ul {border-left: 30px solid #ffffff; }}</style> <!--[if gte mso 9]> <style> .column-top { mso-line-height-rule: exactly !important; } </style> <![endif]--> <meta name="robots" content="noindex,nofollow" /><meta property="og:title" content="My First Campaign" /><link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css"></head> <body style="margin: 0;mso-line-height-rule: exactly;padding: 0;min-width: 100%;background-color: #222"> <style type="text/css">@import url(https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic);@import url(https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic);@import url(https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic);@import url(https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic);@import url(https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic);@import url(http://fonts.googleapis.com/css?family=Kaushan+Script);@font-face{font-family:"Kaushan Script";font-style:normal;font-weight:400;src:local("Kaushan Script"),local("Kaushan Script"),url("http://fonts.googleapis.com/css?family=Kaushan+Script");}body,.wrapper,.emb-editor-canvas{background-color:#ecf3f5}.border{background-color:#F0F0F0 !important}h1{color:#557187}.wrapper h1{}.wrapper h1{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.wrapper h1{font-family:Roboto,Tahoma,helvetica !important}}h1{}.one-col h1{line-height:50px}.two-col h1,.wider h1{line-height:36px}.three-col h1,.narrower h1{line-height:32px}@media only screen and (max-width: 620px){h1{line-height:50px !important}}h2{color:#557187}.wrapper h2{}.wrapper h2{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.wrapper h2{font-family:Roboto,Tahoma,helvetica !important}}h2{}.one-col h2{line-height:32px}.two-col h2,.wider h2{line-height:26px}.three-col h2,.narrower h2{line-height:24px}@media only screen and (max-width: 620px){h2{line-height:32px !important}}h3{color:#557187}.wrapper h3{}.wrapper h3{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.wrapper h3{font-family:Roboto,Tahoma,helvetica !important}}h3{}.one-col h3{line-height:26px}.two-col h3,.wider h3{line-height:23px}.three-col h3,.narrower h3{line-height:21px}@media only screen and (max-width: 620px){h3{line-height:26px !important}}p,ol,ul{color:#757575}.wrapper p,.wrapper ol,.wrapper ul{}.wrapper p,.wrapper ol,.wrapper ul{font-family:helvetica}p,ol,ul{}.one-col p,.one-col ol,.one-col ul{line-height:24px;Margin-bottom:24px}.two-col p,.two-col ol,.two-col ul,.wider p,.wider ol,.wider ul{line-height:21px;Margin-bottom:21px}.three-col p,.three-col ol,.three-col ul,.narrower p,.narrower ol,.narrower ul{line-height:18px;Margin-bottom:18px}@media only screen and (max-width: 620px){p,ol,ul{line-height:24px !important;Margin-bottom:24px !important}}.image{color:#757575}.image{font-family:helvetica}.wrapper a{color:#454545}.wrapper a:hover{color:#2b2b2b !important}.wrapper .btn a{color:#fff;background-color:#557187;box-shadow:0 3px 0 #445a6c}.wrapper .btn a{font-family:helvetica}.wrapper .btn a:hover{box-shadow:inset 0 1px 2px #445a6c !important;color:#fff !important}.wrapper p a,.wrapper ol a,.wrapper ul a{border-bottom:1px dotted #454545}.wrapper blockquote{border-left:4px solid #ecf3f5}.wrapper .three-col blockquote,.wrapper .narrower blockquote{border-left:2px solid #ecf3f5}.logo div{color:#c3ced9}.wrapper .logo div{}.wrapper .logo div{font-family:"Trebuchet MS",helvetica}@media only screen and (min-width: 0){.wrapper .logo div{font-family: "Kaushan Script" !important}}.logo div a{color:#FED136}.logo div a:hover{color:#FED136 !important}.preheader,.footer{color:#b9b9b9}.preheader,.footer{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.preheader,.footer{font-family:Roboto,Tahoma,helvetica !important}}.wrapper .preheader a,.wrapper .footer a{color:#b9b9b9}.wrapper .preheader a:hover,.wrapper .footer a:hover{color:#b9b9b9 !important}.footer .social a{}.wrapper .footer .social a{}.wrapper .footer .social a{font-family:Tahoma,helvetica}@media only screen and (min-width: 0){.wrapper .footer .social a{font-family:Roboto,Tahoma,helvetica !important}}.footer .social a{}.footer .social a{font-weight:600}</style> <center class="wrapper" style="display: table;table-layout: fixed;width: 100%;min-width: 480px;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;background: #fff;"> <!--table starts--> <table class="border" style="border-collapse: collapse;border-spacing: 0;font-size: 1px;line-height: 1px;background-color: #d4dbdd;Margin-left: auto;Margin-right: auto"> <tbody> <tr> <td style="padding: 0;vertical-align: top">&#8203; </td> </tr> </tbody> </table><!--table ends--> <table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;padding-top: 50px;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top;padding-bottom:30px; padding-left: 20px;padding-right: 20px"><a style="outline:none;" href="http://beautifulyears.com" target="_blank" > <img style="width:180px;Margin-top:-20px;"src="http://beautifulyears.com/uploaded_files/c5a6c771-a28e-417e-91ae-557112aaa36a.png" /> </a> </td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--><!--table starts--> <table class="border" style="border-collapse: collapse;border-spacing: 0;font-size: 1px;line-height: 1px;background-color: #d4dbdd;Margin-left: auto;Margin-right: auto" width="480"> <tbody> <tr class="border" style="font-size: 1px;line-height: 1px;background-color: #e3e3e3;height: 1px"> <td class="border" style="padding: 0;vertical-align: top;font-size: 1px;line-height: 1px;background-color: #d4dbdd;width: 1px">&#8203; </td> <td style="padding: 0;vertical-align: top;line-height: 1px">&#8203;</td> <td class="border" style="padding: 0;vertical-align: top;font-size: 1px;line-height: 1px;background-color: #d4dbdd;width: 1px">&#8203;</td> </tr> </tbody> </table><!--table ends--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;padding-top: 20px;width: 480px; color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top;padding-bottom:20px;"><h3 style ="font-size:18px; font-weight: 300; text-align:left; line-height:20px; color:#818181;"><b style="color:#222">'
            		+ senderName
            		+ '</b> shared a BeautifulYears post with you.</h3><div style="width:100%; position: relative !important; height:44px;"><div style="width: 25%;height: 0;padding-left:3%;padding-bottom:3%; top: -22%;overflow: hidden; position:absolute"><div style="width: 0;height: 0;margin-left:0px;border-left: 10px solid transparent;border-right: 10px solid transparent;border-bottom: 10px solid #BCBCBC;"></div></div><div style="width: 25%;height: 0;padding-left:3%;padding-bottom:3%; top: -20%; overflow: hidden; position:absolute"><div style="width: 2px;height: 2px;margin-left:-1px;border-left: 10px solid transparent;border-right: 10px solid transparent;border-bottom: 10px solid #f5f5f5;"></div></div><div style="background: #f5f5f5 none repeat scroll 0% 0%; width:480px; height:auto; min-height:30px; height:auto !important; height:30px; overflow: hidden; border-radius: 5px; border: 1px solid rgb(188, 188, 188);"><p style="margin-top: 0px; color: #818181; font-weight: 300; font-size: 16px; font-family: helvetica; line-height: 22px; margin-bottom: 0px; text-align: justify; padding:10px;">'
            		+ $scope.shares.message 
            		+ '</p></div></div></td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;padding-top: 0px;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top; padding-left: 20px;padding-right: 20px"><img style="width:50px; display: inline;border:5px solid #F1F1F1" src="'
            		+ profileImage
            		+ '" /> <div style="display: inline; float: right; margin: 0px 15px"><p style="color: rgb(65, 65, 65); font-size: 15px; font-family: sans-serif; margin-top: 6px; line-height: 15px; margin-bottom: 6px; font-weight: 500;">By '
            		+ data.username
            		+ '</p><p style="margin-top: 0px; color: rgb(128, 124, 124); font-weight: 300; font-size: 15px; font-family: helvetica; line-height: 21px; text-align: justify;">'
            		+ dateDifference
            		+ ' days ago</p></div></td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--><!--table starts--> <table class="border" style="border-collapse: collapse;border-spacing: 0;font-size: 1px;line-height: 1px;background-color: #d4dbdd;Margin-left: auto;Margin-right: auto"> <tbody> <tr> <td style="padding: 0;vertical-align: top">&#8203; </td> </tr> </tbody> </table><!--table ends--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align:top;"><h3 style="Margin-top: 0;color: #333; font-weight: 300;font-size: 20px; Margin-bottom:10px; font-family: helvetica; line-height: 22px; text-align:center">'
            		+ data.title
            		+ '</h3> </td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top;padding-left: 20px;padding-right: 20px"><div class="image" style="font-size: 12px;Margin-bottom: 21px;mso-line-height-rule: at-least;color: #757575;font-family: helvetica" align="center">'
            		+ borderOpen
            		+ storyImage
            		+ borderClose
            		+ '</div> </td> </tr> </tbody> </table> </center> </td> </tr> </tbody> </table><!--table ends--> <!--table starts--><table class="centered" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;background-color: #ffffff;"> <tbody> <tr> <td class="column first" style="padding: 0;vertical-align: top;line-height: 17px;font-weight: 400;font-size: 11px;Margin-right: auto;Margin-left: auto;width: 480px;color: #fff;font-family: helvetica"> <center> <table class="social" style="border-collapse: collapse;border-spacing: 0;Margin-left: auto;Margin-right: auto;"> <tbody> <tr> <td style="padding: 0;vertical-align: top;padding-bottom: 20px;"> <p style="Margin-top: 0;color: #777;font-size: 16px;font-family: helvetica; line-height: 22px;Margin-bottom: 21px; width:100%; height:auto; min-height:30px; height:auto !important; height:30px; overflow:hidden; text-align:center">'
            		+ data.shortSynopsis
            		+ '</p><a href="http://beautifulyears.com/#!/discuss/'
            		+ data.id
            		+ '" target="_blank" style="text-align:center; display:block; text-decoration: none; outline: none; "><h3 style="background: #004f24 none repeat scroll 20px 20px; width: 155px; height: 35px; line-height: 35px; border-radius: 3px; color: rgb(255, 255, 255); font-size: 15px; margin: 20px 35%;">Read Full Article</h3></a></td> </tr> </tbody> </table> </center> </td> </tr> </tbody></table><!--table ends--> </center> <script type="text/javascript"> WebFontConfig = { google: { families: [ "Kaushan+Script::latin" ] } }; (function() { var wf = document.createElement("script"); wf.src = ("https:" == document.location.protocol ? "https" : "http") + "://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"; wf.type = "text/javascript"; wf.async = "true"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(wf, s); })(); </script></body></html>';
            	
            }
            
            var emailList = $scope.shares.email;
            
            var emailIds = [];
            
            emailIds = emailList.split(",");
            
        	$scope.emailParams = {};
        	$scope.emailParams.emailIds = emailIds;
        	$scope.emailParams.subject = storyTitle;
        	$scope.emailParams.body = $scope.htmlBody;

        	$http.post($scope.pathName + 'api/v1/share/email', $scope.emailParams   
    		).success(function (response, status, headers, config) {
    			
    		}).error(function (data, status, headers, config) {    
    			console.log(status);
    		});
        	
        }
        
    	$scope.shareComment = function(sharedObj, $event){
            var caption = "", picture = Math.random() + ".jpg", description = "";
        	$event.stopPropagation();
            if(FB && sharedObj){
                caption = sharedObj.title ? sharedObj.title: "BeautifulYears";
                picture = BY.byUtil.getImage(sharedObj,true);
                description = sharedObj.text ? $(sharedObj.text).text() : "";

                if((!description || description =="") && (sharedObj.linkInfo)){
                	description = sharedObj.linkInfo.description || "";
                	description = description.length>300 ? this.substr(0,300-1)+'&hellip;' : description;
                	caption = caption || sharedObj.linkInfo.title || "BeautifulYears";
                }

                FB.ui({
                    method: 'feed',
                    link: window.location.origin + "/#!/discuss/"+sharedObj.id+"?v="+Math.random(),
                    picture: picture,
                    caption: "Beautiful Years",
                    description: description,
                    name:caption
                }, function(response){
                    console.log(response);
                    if (response && response.post_id) {
                        var shareDiscuss = new ShareDiscuss();
                        shareDiscuss.id = sharedObj.id;
                        shareDiscuss.$post({},function(res){
                            $scope.$parent.updateShareCount(res.data.shareCount);
                        },function(err){
                            console.log("alert posting the share count");
                        });
                    } else {
                        console.log('Post was not published.');
                    }
                });
            }
        }
    }
    
    ShareController.$inject=['$scope', '$http', '$rootScope', '$location', '$sce', '$filter', 'ValidateUserCredential','ShareDiscuss'];
    byApp.registerController('ShareController', ShareController);
    return ShareController;      

});


