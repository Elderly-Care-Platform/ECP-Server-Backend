<div class="replyCard by-commment-bg-gray">
    <img ng-if="reply.userProfile && reply.userProfile.basicProfileInfo.profileImage"
         ng-src="{{reply.userProfile.basicProfileInfo.profileImage.thumbnailImage|| ''}}"
         fallback-src='["assets/img/by.png"]' alt="image" class="replyCardImg">

    <img ng-if="!reply.userProfile || !reply.userProfile.basicProfileInfo.profileImage" ng-src="assets/img/by.png"
         alt="image" class="replyCardImg">

    <div class="replyCard_right">
        <ul class="replyCard_list">
            <li ng-if="reply">By <a validate-user-name="{{reply.userName}}"
                                    ng-href="{{getHrefProfileReply(reply, {'profileId':reply.userId})}}"
                                    ng-click="$event.stopPropagation();">
                {{username}} </a> &nbsp; |
            </li>
            <li time-since="{{reply.createdAt}}"></li>
        </ul>
        <div style="clear: both"></div>
        <ul class="replyCard_list">
            <li>
                <p ng-bind-html="trustForcefully(reply.text)"></p>
            </li>
        </ul>
        <div style="clear: both"></div>
    </div>
    <div style="clear: both"></div>


    <div class="replyCardShare">
        <ul class="replyCardShareList">
            <li>
                <a ng-click="createNewComment(reply.id)">
                    <i class="rounded-x icon-speech ng-scope" title="Comment"></i>
                    <span ng-if="reply.childrenCount > 0">{{reply.childrenCount}}</span>
                </a>

                <div ng-click="createNewComment(reply.id)">
                    Comment
                </div>
            </li>
            <li ng-controller="DiscussLikeController">
                <a ng-click="likeComment(reply.id, reply.replyType)">
                    <i class="rounded-x" ng-if="beforePost"
                       ng-class="{false:'icon-heart', true:'icon-heart-active'}[reply.likedByUser===true]"
                       title="Likes"></i>
                    <i class="rounded-x" ng-if="!beforePost"
                       ng-class="{false:'icon-heart', true:'icon-heart-active'}[likedByUser===true]" title="Likes"></i>
                    <span ng-if="beforePost && reply.likeCount > 0">{{reply.likeCount}}</span>
                    <span ng-model="aggrLikeCount" ng-if="!beforePost && aggrLikeCount > 0">{{aggrLikeCount}}</span>
                </a>

                <div ng-click="likeComment(reply.id, reply.replyType)">Like</div>

            </li>
        </ul>
    </div>
    <div style="clear: both"></div>
    <div class="replyCardInsideComment by_editor_wrap by-commment-bg-gray"
         id="commentEditor" ng-show="showEditor">
        <img src="assets/img/by.png" alt="image" class="replyCardImg">

        <div class="replyCard_right">
            <textarea rows="3" id="{{reply.id}}"></textarea>

            <div class="clearfix" style="height:45px;"></div>

            <div class="col-md-6 no-padding margin-bottom-10 register-page" ng-if="!userSessionType">
                <input type="email" class="by_registerEmailId"
                       placeholder="Enter your email Id" ng-model="userCredential.email" name="userEmail" required/>
                <span ng-show="errorMsg" class="errorRed">
                        Please enter valid Email Id
                </span>
            </div>
            <div class="col-md-6 by_emailIdHint">
                We will send you updates when someone responds on this thread. 
            </div>
             <div class="clearfix" ></div>

            <button class="inner-comment-submit btn btn-sm btn-success by_btn_submit by-editor-submit-btn"
                    type="submit" disabled ng-click="postComment(reply.discussId, reply.id)">
                SUBMIT
            </button>
            <button class="inner-comment-submit btn btn-sm btn-success by_btn_cancel"
                    ng-click="disposeComment(reply.id)">CANCEL
            </button>
        </div>
        <div style="clear: both"></div>
    </div>

    <div ng-if="reply.replies && reply.replies.length > 0">
        <div class="insideComments" ng-repeat="reply in reply.replies"
             ng-controller="DiscussReplyController"
             ng-include="'app/shared/common/template/replyCard.html?versionTimeStamp=%PROJECT_VERSION%'"></div>
    </div>
</div>



