<div class="padding20 whiteBg by_discuss_detail">
    <div class="article">
        <div class="article-info">
            <ul class="list-inline posted-info">
                <li ng-if="res.discuss.discussType == 'A'"><a href="#">Story by {{res.discuss.username !== "null" ? res.discuss.username : "Anonymous"}}</a></li>
                <li ng-if="res.discuss.discussType == 'P'"><a href="#">Post by {{res.discuss.username !== "null" ? res.discuss.username : "Anonymous"}}</a></li>
                <li ng-if="res.discuss.discussType == 'Q'"><a href="#">Question by {{res.discuss.username !== "null" ? res.discuss.username : "Anonymous"}}</a></li>
                <li> In
                    <a href="#/discuss/{{res.discuss.discussType}}/{{res.discuss.topicId[0]}}/all">{{$root.discussCategoryListMap[res.discuss.topicId[0]].name}}</a>
                </li>
                <li>{{res.discuss.createdAt | date:'medium'}}</li>
            </ul>
        </div>
        <div class="article-heading">{{res.discuss.title}}</div>
        <img src="{{res.discuss.articlePhotoFilename}}" alt="image" fallback-src="assets/img/by.jpg">

        <div class="articles-story" ng-bind-html="trustForcefully(res.discuss.text)" style="word-wrap: break-word;">
        </div>
    </div>
    <div class="article-share-links news-v3">
        <ul class="post-shares post-shares-lg">
            <li class="add-comment" ng-if="res.discuss.discussType == 'A' || res.discuss.discussType == 'P'">
                <a ng-click="createNewComment(res.discuss.id)">
                    <i class="rounded-x icon-speech ng-scope" title="Comment"></i>
                    <span ng-if="res.discuss.aggrReplyCount > 0">{{res.discuss.aggrReplyCount}}</span>
                </a>

                <div class="post-text post_text-comment"
                     ng-click="createNewComment(res.discuss.id)">Comment
                </div>
            </li>

            <li class="add-comment" ng-if="res.discuss.discussType == 'Q'">
                <a ng-click="createNewComment(res.discuss.id)">
                    <i class="rounded-x fa fa-pencil-square-o" title="Answers"></i>
                    <span ng-if="res.discuss.aggrReplyCount > 0">{{res.discuss.aggrReplyCount}}</span>
                </a>

                <div class="post-text post_text-comment"
                     ng-click="createNewComment(res.discuss.id)">Answers
                </div>
            </li>

            <li>
                <a href="#">
                    <i class="rounded-x icon-share"></i>
                </a>

                <div class="post-text post_text-comment">Share
                </div>
            </li>

            <li ng-controller="DiscussLikeController">
                <a ng-click="likeDiscuss(res.discuss.id)">
                    <i class="rounded-x icon-heart" title="Likes"></i>
                    <span ng-if="beforePost">{{res.discuss.aggrLikeCount}}</span>
                    <span ng-model="aggrLikeCount" ng-if="!beforePost">{{aggrLikeCount}}</span>
                </a>
                <a ng-click="likeDiscuss(res.discuss.id)">
                    <div class="post-text">
                        Like
                    </div>
                </a>
            </li>
        </ul>
    </div>
</div>

<div class="article-comments-wrapper" id="article-comments-wrapper">
    <h2 class="text-success text-underlined">COMMENTS</h2>

    <!--Comment Editor for main article-->
    <div class="col-md-12 no-padding" id="replyEditor" style="margin-bottom: 20px" ng-show="showEditor">
        <div class="whiteBg enter-comment-wrap padding20SM borderShadow" id="answer_block">
            <textarea rows="3"  id={{res.discuss.id}}></textarea>
            <div class="clearfix"></div>
            <button class="btn btn-sm btn-success comment-submit" type="submit"
                    ng-click="postReply(res.discuss.id, res.discuss.discussType)">SUBMIT
            </button>
            <span/>
            <button class="btn btn-sm btn-success comment-submit by_btn_cancel"
                    ng-click="disposeComment()">CANCEL
            </button>
            <div class="clearfix"></div>
        </div>
    </div>
</div>

<div ng-if="res.replies && res.replies.length > 0" >
    <div ng-repeat="reply in res.replies" data-index="discussion-articles"
          data-link="articles.html" ng-controller="DiscussReplyController" ng-include="'app/shared/common/template/replyCard.html'"></div>
</div>

