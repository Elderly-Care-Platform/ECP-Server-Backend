<div id="discussListContainer"></div>
<div class="by_commSectionHeader" ng-if="commSectionHeader[selectedMenu.id]" style="margin-top:-30px;">
    {{commSectionHeader[selectedMenu.id].desc}}
</div>

<div class="clearfix"></div>
<div class="by_editorButtonWrap">
    <div class="col-md-6 col-xs-6  col-sm-6  by_editorButtonWrap_thumb"
         ng-click="add('Question')" ng-init="initScroll()">
        <i class="sprite sprite-question divLeft"></i>
        <span class="divLeft by_editorButtonHead">Ask our experts</span>

        <div class="clearfix"></div>
        <div class="by_editorButtonText col-md-12">
            Type any question about {{selectedMenu.displayMenuName}} &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
        </div>
    </div>
    <div class="col-md-6 col-xs-6 col-sm-6  by_editorButtonWrap_thumb"
         ng-click="add('Article')">
        <i class="sprite sprite-story divLeft"></i>
        <span class="divLeft by_editorButtonHead">Share</span>

        <div class="clearfix"></div>
        <div class="by_editorButtonText col-md-12">
            Post your tips and stories about {{selectedMenu.displayMenuName}}
        </div>
    </div>
    <div class="clearfix"></div>
</div>
<div class="clearfix margin-top-20">&nbsp;</div>

<a class="discussRightCategory {{discussType == 'all' && 'selected active'}}" ng-if="discuss_counts.z > 0"
   href="#!/discuss/list/{{selectedMenu.slug || selectedMenu.displayMenuName}}/{{selectedMenu.id}}/all">All
    ({{discuss_counts.z}})</a>

<a class="discussRightCategory {{discussType == 'f' && 'selected active'}}" ng-if="discuss_counts.featured > 0"
   href="#!/discuss/list/{{selectedMenu.slug || selectedMenu.displayMenuName}}/{{selectedMenu.id}}/f">Featured
    ({{discuss_counts.featured}})</a>

<a class="discussRightCategory {{discussType == 'Q' && 'selected active'}}" ng-if="discuss_counts.q > 0"
   href="#!/discuss/list/{{selectedMenu.slug || selectedMenu.displayMenuName}}/{{selectedMenu.id}}/Q">Q
    &amp; A ({{discuss_counts.q}})</a>

<a class="discussRightCategory {{discussType == 'P' && 'selected active'}}" ng-if="discuss_counts.p > 0"
   href="#!/discuss/list/{{selectedMenu.slug || selectedMenu.displayMenuName}}/{{selectedMenu.id}}/P">Posts
    ({{discuss_counts.p}})</a>


<div class="clearfix" style="height:15px;"></div>

<div class="blog_masonry_3col">
    <div class="grid-boxes by_discuss_listing">
        <div class="grid-boxes-in " ng-repeat="discuss in discussList"
             ng-class="discuss.promotion == true? 'grid-boxes-in-two' : ''">

            <div ng-if="$last" ng-init="initGrid($index)"></div>

            <!--Promotion/announcement cards start ----------------------------------------------->
            <div ng-click="go($event, 'detail', discuss.id, discuss.discussType)"
                 class="by-discuss-card by_blog_author" ng-if="discuss && discuss.promotion == true">

                <div class="questionTag postTag"
                     ng-if="discuss.discussType == 'P' && discuss.featured == true">
                </div>
                <div class="by_discuss_title col-md-12"
                     ng-if="discuss.discussType == 'P' && discuss.title"
                     style="margin-top: 15px;">
                    <div class="article-heading">
                        <p style="text-transform: uppercase;">{{discuss.title}}</p>
                    </div>
                    <div style="clear: both"></div>
                </div>
                <div class="by-quad-image col-md-12 no-padding"
                     style="margin-top: -1px;">
                    <img ng-if="discuss.discussType == 'P'"
                         ng-src="{{discuss.articlePhotoFilename.original||''}}" alt="image"
                         fallback-src='["{{discuss.articlePhotoFilename.original||""}}"]'>

                    <div style="clear: both"></div>
                </div>
                <div style="clear: both"></div>
            </div>


            <!------------ Post/question cards start ----------------------------------------------->
            <div ng-click="go($event, 'detail', discuss.id, discuss.discussType)"
                 class="by-discuss-card by_blog_author" ng-if="discuss && discuss.promotion == false">
                <div class="questionTag" ng-if="discuss.discussType == 'Q' && discuss.featured == true"></div>
                <div class="questionTag postTag" ng-if="discuss.discussType == 'P' && discuss.featured == true"></div>

                <!------------------Card author profile image---------------------------------------->
                <img class="by_discuss_img" ng-if="discuss.userProfile.basicProfileInfo.profileImage.thumbnailImage"
                     ng-src="{{discuss.userProfile.basicProfileInfo.profileImage.thumbnailImage || ''}}"
                     fallback-src='["assets/img/by.png"]' alt="profileImage">

                <img class="by_discuss_img" ng-if="!discuss.userProfile.basicProfileInfo.profileImage.thumbnailImage"
                     ng-src="assets/img/by.png" alt="profileImage">


                <!-------------Author name and created at------------------------------------------------------------->
                <div class="by_discuss_info" style="margin-right: 80px !important;">
                    <ul class="list-inline by_discuss_infoList" style="">
                        <li>
                            <p>
                                By <a validate-user-name="{{discuss.username}}"
                                      class="text-capitalize"
                                      href="#!/profile/0/{{discuss.userId}}/{{discuss.username}}">
                                {{username}}</a>
                            </p>
                        </li>
                        <br/>

                        <li time-since="{{discuss.createdAt}}"></li>

                    </ul>
                    <div style="clear: both"></div>
                </div>
                <div style="clear: both"></div>

                <!-------------------------------Article title---------------------------------------->
                <div class="by_discuss_title col-md-12"
                     ng-if="discuss.discussType == 'P'">
                    <p class="text-uppercase">{{discuss.title}}</p>
                </div>
                <div style="clear: both"></div>

                <!-------------------------------Article image---------------------------------------->
                <div class="by_discuss_image col-md-12">
                    <img ng-if="discuss.discussType == 'P' && (discuss.articlePhotoFilename.titleImage || discuss.articlePhotoFilename.original)"
                         ng-src="{{discuss.articlePhotoFilename.titleImage||''}}" alt="image"
                         fallback-src='["{{discuss.articlePhotoFilename.original||""}}"]'>

                    <div style="clear: both"></div>
                </div>

                <!-------------------------------external shared article ---------------------------------------->
                <div ng-include="'app/shared/common/template/ShareLinkListing.html'"
                     ng-if="discuss.linkInfo" ng-init="linkInfo=discuss.linkInfo"
                     ng-if="discuss.promotion == false"></div>


                <div class="by_discuss_desc  col-md-12" id="{{discuss.id}}">
                    <p class="by_discuss_desciption" ng-if="discuss.shortSynopsis">
                        {{discuss.shortSynopsis}}
                        <a class="divRight by_readmore">ReadMore <b style="font-size: 10px;">&#9002;</b></a>
                    </p>

                    <p class="by_discuss_desciption" ng-if="!discuss.shortSynopsis"
                       ng-bind-html="trustForcefully(discuss.text)"></p>
                </div>

                <div style="clear: both; height: 1px;"></div>


                <!------------------------Comment, like, share buttons start------------------------>
                <div class="article-share-links news-v3 by_border">
                    <ul class="post-shares post-shares-lg">
                        <li class="add-comment" ng-if="discuss.aggrReplyCount > 0 && (discuss.discussType == 'P')">
                            <a ng-href="#!/discuss/{{discuss.id}}/true" ng-click="$event.stopPropagation();">
                                <i class="rounded-x icon-speech ng-scope" title="Comment"></i>
                                <span>{{discuss.aggrReplyCount}}</span>

                                <div class="text">Comment</div>
                            </a>
                        </li>

                        <li class="add-comment add-comment-FC"
                            ng-if="discuss.aggrReplyCount == 0 && (discuss.discussType == 'P')">
                            <a ng-href="#!/discuss/{{discuss.id}}/true" ng-click="$event.stopPropagation();">
                                <i class="rounded-x icon-speech ng-scope" title="Comment"></i>

                                <div class="text">
                                    Be the first to comment
                                </div>
                            </a>
                        </li>
                        <li class="add-comment" ng-if="discuss.directReplyCount > 0 && discuss.discussType == 'Q'">
                            <a ng-href="#!/discuss/{{discuss.id}}/true" ng-click="$event.stopPropagation();">
                                <i class="rounded-x icon-answer ng-scope" title="Answers"></i>
                                <span>{{discuss.directReplyCount}}</span>

                                <div class="text">Answer</div>
                            </a>
                        </li>

                        <li class="add-comment add-comment-FA"
                            ng-if="discuss.directReplyCount == 0 && discuss.discussType == 'Q'">
                            <a ng-href="#!/discuss/{{discuss.id}}/true" ng-click="$event.stopPropagation();">
                                <i class="rounded-x icon-answer ng-scope" title="Answers"></i>

                                <div class="text">
                                    Be the first to answer
                                </div>
                            </a>
                        </li>

                        <li class="add-comment" ng-controller="DiscussLikeController"
                            ng-click="$event.stopPropagation();">
                            <a ng-click="likeDiscuss(discuss.id)">
                                <i class="rounded-x"
                                   ng-if="beforePost"
                                   ng-class="{true:'icon-heart', false:'icon-heart-active'}[discuss.likedByUser===false]"
                                   title="Likes"></i>
                                <i class="rounded-x"
                                   ng-if="!beforePost"
                                   ng-class="{true:'icon-heart', false:'icon-heart-active'}[likedByUser===false]"
                                   title="Likes"></i>
                                <span ng-if="beforePost && discuss.aggrLikeCount > 0">{{discuss.aggrLikeCount}}</span>
                                <span ng-model="aggrLikeCount" ng-if="!beforePost && aggrLikeCount > 0">{{aggrLikeCount}}</span>
                            </a>

                            <div ng-click="likeDiscuss(discuss.id)" class="text text2">Like</div>
                        </li>

                        <li class="add-comment" ng-if="discuss.discussType == 'P'"
                            ng-controller="ShareController">
                            <a ng-click="shareComment(discuss, $event)">
                                <i class="rounded-x icon-share"></i>
                                <span ng-if="discuss.shareCount > 0">{{discuss.shareCount}}</span>
                            </a>

                            <div class="post-text post_text-comment">
                                <a ng-click="shareComment(discuss, $event)">
                                    <div class="text">Share</div>
                                </a>
                            </div>
                        </li>
                        <div class="clearfix"></div>
                    </ul>
                </div>

                <!------------------------Comment, like, share buttons end------------------------>

                <div style="clear: both"></div>
            </div>


            <div style="clear: both"></div>
        </div>

    </div>
    <div style="clear: both"></div>

    <div style="clear: both"></div>
    <div ng-if="discussPagination.noOfPages > 1">
        <div class="text-left">
            <by-pagination obj="discussPagination" callback="getDiscussData"></by-pagination>
        </div>
    </div>
</div>