<div ng-repeat="discuss in discuss" data-index="discussion-articles"
     data-link="articles.html">

    <!-- show if discuss is of type Article -->
    <div ng-click="go($event, 'id', discuss.id, discuss.discussType)" class="blog-author margin-bottom-35 main-article by_blog_author"
         data-index="discussion-articles"
         data-link="articles.html">
        <img src="{{discuss.articlePhotoFilename}}" alt="image" fallback-src="assets/img/by.jpg">
        <div class="article-share-links news-v3" style="position: relative;top: -10px;">
            <ul class="post-shares post-shares-lg">
                <li class="add-comment" ng-if="discuss.aggrReplyCount > 0 && (discuss.discussType == 'A' || discuss.discussType == 'P')">
                    <a href="#">
                        <i class="rounded-x icon-speech ng-scope" title="Comment"></i>
                        <span>{{discuss.aggrReplyCount}}</span>
                    </a>
                </li>
                <li class="add-comment" ng-if="discuss.directReplyCount > 0 && discuss.discussType == 'Q'">
                    <a href="#">
                        <i class="rounded-x fa fa-pencil-square-o ng-scope" title="Answers"></i>
                        <span>{{discuss.directReplyCount}}</span>
                    </a>
                </li>

                <li ng-if="discuss.aggrLikeCount > 0">
                    <a href="#">
                        <i class="rounded-x icon-heart" title="Likes"></i>
                        <span ng-if="discuss.aggrLikeCount > 0">{{discuss.aggrLikeCount}}</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="article-info dp-inline-block">
            <ul class="list-inline posted-info">
                <li>
                    <p class="article-first-letter" ng-if="discuss.discussType == 'A'">
                        Story by <a validate-user-name="{{discuss.username}}"> {{username}}</a>
                        |
                    </p>
                    <p class="article-first-letter" ng-if="discuss.discussType == 'Q'">
                        Question by <a validate-user-name="{{discuss.username}}"> {{username}}</a>
                        |
                    </p>
                    <p class="article-first-letter" ng-if="discuss.discussType == 'P'">
                        Post by <a validate-user-name="{{discuss.username}}"> {{username}}</a>
                        |
                    </p>
                </li>
                <li ng-if="discuss.topicId.length > 0">  In <a ng-click="go($event,'name', discuss.topicId[0])">
                    {{$root.discussCategoryListMap[discuss.topicId[0]].name}} </a>
                    |
                </li>
                <li time-since="{{discuss.createdAt}}"> </li>
            </ul>
        </div>

        <div class="article" ng-if="discuss.discussType == 'A'">
            <div class="article-heading"><p style="text-transform: capitalize">{{discuss.title}}</p>
            </div>
        </div>

        <div class="articles-story by_story" id="{{discuss.id}}">
            {{discuss.text}}
        </div>
        <div style="clear: both"></div>

        <div ng-if="discuss.text && discuss.text.length > 0" on-finish-render="{{discuss.id}}"></div>
    </div>
</div>
